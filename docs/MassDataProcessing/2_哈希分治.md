# 哈希分治

## hash 映射

为了便于计算机在有限的内存中处理大数据，我们通过一种映射散列的方式让数据均匀分布在对应的内存位置（如大数据通过取余的方式映射成小数据存放在内存中， 或大文件映射成多个小文件），而这种映射散列的方式便是我们通常所说的 hash 函数，好的 **hash 函数**能让数据均匀分布而减少冲突。

对于海量数据而言，由于无法一次性装进内存处理，不得不把海量的数据通过 hash 映射的方法分割成相应的小块数据，然后再针对各个小块数据通过 hashMap 进行统计或其他操作。

## 寻找 TOP IP

### 问题

海量日志数据，提取出某日访问百度次数最多的那个 IP。

### 思路

如果想一次性把所有 IP 数据装进内存处理，则内存容量通常不够，故**针对数据太大，内存受限的情况**，可以把大文件转化成（取模映射）小文件，从而大而化小，逐个处理。即，**先映射，而后统计，最后排序**。

### 解决

- 先映射。

  首先将该日访问百度的所有 IP 从访问日志中提取出来，然后逐个写入到一个大文件中，接着采取 hash 映射的方法（比如 hash(IP)%1000），把整个大文件的数据映射到 1000 个小文件中。

- 统计。

  当大文件转化成了小文件，那么我们便可以采用 hashMap(ip,cnt) 来分别对 1000 个小文件中的 IP 进行频率统计，找出每个小文件中出现频率最大的 IP，总共 1000 个 IP。

- 堆排序/快速排序。

  统计出 1000 个频率最大的 IP 后，依据它们各自频率的大小进行排序，找出那个出现频率最大的 IP，即为所求。



## 寻找热门查询

