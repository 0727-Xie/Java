<!-- GFM-TOC -->
* [七、异常](#七异常)
    * [异常的概念](#异常的概念)
    * [异常继承体系](#异常继承体系)
    * [Java异常的处理机制](#Java异常的处理机制)
<!-- GFM-TOC -->
# 七、异常
## 异常的概念
Java异常是一个描述在代码段中**发生异常的对象**，当发生异常情况时，
一个代表该异常的对象被创建并且在导致该异常的方法中被抛出，
而该方法可以选择自己处理异常或者传递该异常。

## 异常继承体系
Throwable 可以用来表示任何可以作为异常抛出的类，分为两种： **Error**  和 **Exception**。

- Error通常是灾难性的致命的错误，是**程序无法控制和处理*8的，当出现这些异常时，Java虚拟机（JVM）一般会选择终止线程
- Exception通常情况下是可以被程序处理的，并且在程序中应该**尽可能地去处理**这些异常

Exception 分为两种：

- **受检异常**：在正确的程序运行过程中，很容易出现的、情理可容的异常状况，
在一定程度上这种异常的发生是可以预测的，并且一旦发生该种异常，就必须采取某种方式进行处理。
（注意：**除了RuntimeException及其子类以外**，其他的Exception类及其子类都属于这种异常，
当程序中可能出现这类异常，要么使用try-catch语句进行捕获，要么用throws子句抛出，否则编译无法通过。)

- **非受检异常**：包括RuntimeException及其子类和Error。
(注意:非受检查异常为编译器不要求强制处理的异常，受检异常则是编译器要求必须处置的异常。)

<div align="center"> <img src="pics//PPjwP.png" width="600"/> </div><br>

## Java异常的处理机制
Javc异常处理机制本质上就是**抛出异常和捕捉异常**。

**抛出异常**

i.普通问题:指在当前环境下能得到足够的信息，总能处理这个错误。

ii.异常情形:是指阻止当前方法或作用域继续执行的问题。对于异常情形，已经程序无法执行继续下去了，
因为在当前环境下无法获得必要的信息来解决问题，我们所能做的就是从当前环境中跳出，并把问题提交给上一级环境，
这就是抛出异常时所发生的事情。

iii.抛出异常后，会有几件事随之发生：
       
第一：像创建普通的java对象一样将使用new在堆上创建一个异常对象
 
 第二：当前的执行路径（已经无法继续下去了）被终止，并且从当前环境中弹出对异常对象的引用。
        
此时，**异常处理机制接管程序，并开始寻找一个恰当的地方继续执行程序**，这个恰当的地方就是异常处理程序或者异常处理器，
它的任务是**将程序从错误状态中恢复**，以使程序要么换一种方式运行，要么继续运行下去。
    
**捕捉异常**

在方法抛出异常之后，运行时系统将转为寻找合适的**异常处理器**（exception handler）。
潜在的异常处理器是异常发生时依次存留在**调用栈**中的方法的集合。
当异常处理器所能处理的异常类型与方法抛出的异常类型相符时，即为合适的异常处理器。
运行时系统从发生异常的方法开始，依次回查调用栈中的方法，直至找到含有合适异常处理器的方法并执行。
当运行时系统遍历调用栈而未找到合适的异常处理器，则运行时系统终止。同时，意味着Java程序的终止。

注意：

对于运行时异常、错误和检查异常，Java技术所要求的异常处理方式有所不同。

（1）由于运行时异常及其子类的不可查性，为了更合理、更容易地实现应用程序，
Java规定，运行时异常将由Java运行时系统自动抛出，允许应用程序忽略运行时异常。

（2）对于方法运行中可能出现的Error，当运行方法不欲捕捉时，Java允许该方法不做任何抛出声明。
因为，大多数Error异常属于永远不能被允许发生的状况，也属于合理的应用程序不该捕捉的异常。

（3）对于所有的检查异常，
Java规定：一个方法必须捕捉，或者声明抛出方法之外。也就是说，当一个方法选择不捕捉检查异常时，它必须声明将抛出异常。


- [Java 入门之异常处理](https://www.tianmaying.com/tutorial/Java-Exception)
- [Java 异常的面试问题及答案 -Part 1](http://www.importnew.com/7383.html)